<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Afspraak Boeken | AutoService Pro Drachten</title>
    
    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="css/base.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Date Picker CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <style>
        
        .booking-card {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
        }
        
        .step {
            flex: 1;
            text-align: center;
            padding: 1rem;
            position: relative;
        }
        
        .step.active {
            color: var(--primary-light);
            font-weight: bold;
        }
        
        .step.completed {
            color: var(--success-color);
        }
        
        .step::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--border-color);
            z-index: -1;
        }
        
        .step:last-child::after {
            display: none;
        }
        
        .step.completed::after {
            background: var(--success-color);
        }
        
        .time-slot {
            cursor: pointer;
            transition: var(--transition-normal);
        }
        
        .time-slot:hover {
            background-color: #eff6ff;
            border-color: var(--primary-light);
        }
        
        .time-slot.selected {
            background-color: var(--primary-light);
            color: white;
        }
        
        .service-option {
            cursor: pointer;
            transition: var(--transition-normal);
            border: 2px solid var(--border-color);
        }
        
        .service-option:hover {
            border-color: var(--primary-light);
        }
        
        .service-option.selected {
            border-color: var(--primary-light);
            background-color: #eff6ff;
        }
        
        .booking-summary {
            background: var(--light-gray);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
        }
        
        .error-message {
            color: var(--error-color);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .success-animation {
            animation: bounceIn 0.6s ease-out;
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-light);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <nav class="navbar is-white" role="navigation">
        <div class="container">
            <div class="navbar-brand">
                <a class="navbar-item" href="index.html">
                    <i class="fas fa-car text-blue-600 mr-2"></i>
                    <span class="has-text-weight-bold">AutoService Pro</span>
                </a>
            </div>
            <div class="navbar-menu">
                <div class="navbar-end">
                    <a class="navbar-item" href="index.html">
                        <i class="fas fa-home mr-1"></i>
                        Terug naar Home
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-body">
            <div class="container">
                <h1 class="hero-title">
                    <i class="fas fa-calendar-alt mr-md"></i>
                    Online Afspraak Maken
                </h1>
                <p class="hero-subtitle">
                    Snel en eenvoudig uw afspraak plannen
                </p>
            </div>
        </div>
    </section>

    <!-- Main App -->
    <div id="bookingApp">
        <section class="section">
            <div class="container">
                <!-- Step Indicator -->
                <div class="step-indicator mb-2xl">
                    <div class="step" :class="{active: currentStep === 1, completed: currentStep > 1}">
                        <i class="fas fa-cogs"></i>
                        <div>Service</div>
                    </div>
                    <div class="step" :class="{active: currentStep === 2, completed: currentStep > 2}">
                        <i class="fas fa-calendar"></i>
                        <div>Datum & Tijd</div>
                    </div>
                    <div class="step" :class="{active: currentStep === 3, completed: currentStep > 3}">
                        <i class="fas fa-user"></i>
                        <div>Gegevens</div>
                    </div>
                    <div class="step" :class="{active: currentStep === 4, completed: currentStep > 4}">
                        <i class="fas fa-check"></i>
                        <div>Bevestiging</div>
                    </div>
                </div>

                <div class="columns is-centered">
                    <div class="column is-8">
                        <div class="booking-card">
                            
                            <!-- Step 1: Service Selection -->
                            <div v-if="currentStep === 1" class="card">
                                <div class="card-header">
                                    <p class="card-header-title">
                                        <i class="fas fa-cogs mr-sm"></i>
                                        Kies uw service
                                    </p>
                                </div>
                                <div class="card-content">
                                    <div class="columns is-multiline">
                                        <div 
                                            v-for="service in services" 
                                            :key="service.id"
                                            class="column is-half"
                                        >
                                            <div 
                                                class="service-option box p-xl"
                                                :class="{selected: selectedService && selectedService.id === service.id}"
                                                @click="selectService(service)"
                                            >
                                                <div class="level">
                                                    <div class="level-left">
                                                        <div>
                                                            <h4 class="title is-5 mb-sm">{{ service.name }}</h4>
                                                            <p class="subtitle is-6 mb-sm">{{ service.description }}</p>
                                                            <p class="has-text-grey">
                                                                <i class="fas fa-clock mr-xs"></i>
                                                                {{ service.duration }} minuten
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="level-right">
                                                        <div class="has-text-right">
                                                            <p class="title is-4 has-text-primary">â‚¬{{ service.price }}</p>
                                                            <p class="has-text-grey">vanaf</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div v-if="errors.service" class="error-message">
                                        {{ errors.service }}
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-primary is-fullwidth"
                                            :disabled="!selectedService"
                                            @click="nextStep"
                                        >
                                            Volgende Stap
                                            <i class="fas fa-arrow-right ml-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 2: Date & Time Selection -->
                            <div v-if="currentStep === 2" class="card">
                                <div class="card-header">
                                    <p class="card-header-title">
                                        <i class="fas fa-calendar mr-sm"></i>
                                        Kies datum en tijd
                                    </p>
                                </div>
                                <div class="card-content">
                                    <div class="columns">
                                        <div class="column is-half">
                                            <div class="field">
                                                <label class="label">Gewenste datum</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="date" 
                                                        v-model="selectedDate"
                                                        :min="minDate"
                                                        @change="loadTimeSlots"
                                                    >
                                                </div>
                                                <div v-if="errors.date" class="error-message">
                                                    {{ errors.date }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="column is-half">
                                            <div class="field">
                                                <label class="label">Locatie</label>
                                                <div class="control">
                                                    <div class="select is-fullwidth">
                                                        <select v-model="selectedLocation">
                                                            <option value="">Kies locatie</option>
                                                            <option 
                                                                v-for="location in locations" 
                                                                :key="location.id"
                                                                :value="location"
                                                            >
                                                                {{ location.name }} - {{ location.address }}
                                                            </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div v-if="errors.location" class="error-message">
                                                    {{ errors.location }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div v-if="selectedDate && selectedLocation">
                                        <label class="label">Beschikbare tijden</label>
                                        <div v-if="loadingTimeSlots" class="has-text-centered p-xl">
                                            <div class="loading-spinner"></div>
                                            Tijdslots laden...
                                        </div>
                                        <div v-else-if="timeSlots.length === 0" class="notification is-warning">
                                            <i class="fas fa-exclamation-triangle mr-sm"></i>
                                            Geen beschikbare tijden voor deze datum. Kies een andere datum.
                                        </div>
                                        <div v-else class="columns is-multiline">
                                            <div 
                                                v-for="slot in timeSlots" 
                                                :key="slot.time"
                                                class="column is-3"
                                            >
                                                <div 
                                                    class="time-slot button is-fullwidth"
                                                    :class="{
                                                        selected: selectedTime === slot.time,
                                                        'is-primary': selectedTime === slot.time
                                                    }"
                                                    :disabled="!slot.available"
                                                    @click="selectTime(slot.time)"
                                                >
                                                    {{ slot.time }}
                                                </div>
                                            </div>
                                        </div>
                                        <div v-if="errors.time" class="error-message">
                                            {{ errors.time }}
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-light"
                                            @click="prevStep"
                                        >
                                            <i class="fas fa-arrow-left mr-sm"></i>
                                            Vorige
                                        </button>
                                    </div>
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-primary"
                                            :disabled="!selectedDate || !selectedTime || !selectedLocation"
                                            @click="nextStep"
                                        >
                                            Volgende Stap
                                            <i class="fas fa-arrow-right ml-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 3: Customer Information -->
                            <div v-if="currentStep === 3" class="card">
                                <div class="card-header">
                                    <p class="card-header-title">
                                        <i class="fas fa-user mr-sm"></i>
                                        Uw gegevens
                                    </p>
                                </div>
                                <div class="card-content">
                                    <div class="columns">
                                        <div class="column is-half">
                                            <div class="field">
                                                <label class="label">Voornaam *</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="text" 
                                                        v-model="customerInfo.firstName"
                                                        :class="{'is-danger': errors.firstName}"
                                                        placeholder="Uw voornaam"
                                                    >
                                                </div>
                                                <div v-if="errors.firstName" class="error-message">
                                                    {{ errors.firstName }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="column is-half">
                                            <div class="field">
                                                <label class="label">Achternaam *</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="text" 
                                                        v-model="customerInfo.lastName"
                                                        :class="{'is-danger': errors.lastName}"
                                                        placeholder="Uw achternaam"
                                                    >
                                                </div>
                                                <div v-if="errors.lastName" class="error-message">
                                                    {{ errors.lastName }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="columns">
                                        <div class="column is-half">
                                            <div class="field">
                                                <label class="label">E-mailadres *</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="email" 
                                                        v-model="customerInfo.email"
                                                        :class="{'is-danger': errors.email}"
                                                        placeholder="uw@email.nl"
                                                    >
                                                </div>
                                                <div v-if="errors.email" class="error-message">
                                                    {{ errors.email }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="column is-half">
                                            <div class="field">
                                                <label class="label">Telefoonnummer *</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="tel" 
                                                        v-model="customerInfo.phone"
                                                        :class="{'is-danger': errors.phone}"
                                                        placeholder="06-12345678"
                                                    >
                                                </div>
                                                <div v-if="errors.phone" class="error-message">
                                                    {{ errors.phone }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Adres</label>
                                        <div class="control">
                                            <input 
                                                class="input" 
                                                type="text" 
                                                v-model="customerInfo.address"
                                                placeholder="Straat en huisnummer"
                                            >
                                        </div>
                                    </div>

                                    <div class="columns">
                                        <div class="column is-one-third">
                                            <div class="field">
                                                <label class="label">Postcode</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="text" 
                                                        v-model="customerInfo.zipCode"
                                                        placeholder="1234AB"
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                        <div class="column is-two-thirds">
                                            <div class="field">
                                                <label class="label">Plaats</label>
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="text" 
                                                        v-model="customerInfo.city"
                                                        placeholder="Plaatsnaam"
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Auto informatie</label>
                                        <div class="columns">
                                            <div class="column is-half">
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="text" 
                                                        v-model="customerInfo.carBrand"
                                                        placeholder="Merk (bijv. BMW, Audi)"
                                                    >
                                                </div>
                                            </div>
                                            <div class="column is-half">
                                                <div class="control">
                                                    <input 
                                                        class="input" 
                                                        type="text" 
                                                        v-model="customerInfo.carModel"
                                                        placeholder="Model en jaar"
                                                    >
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Kenteken</label>
                                        <div class="control">
                                            <input 
                                                class="input text-uppercase" 
                                                type="text" 
                                                v-model="customerInfo.licensePlate"
                                                placeholder="XX-XXX-X"
                                            >
                                        </div>
                                    </div>

                                    <div class="field">
                                        <label class="label">Opmerkingen</label>
                                        <div class="control">
                                            <textarea 
                                                class="textarea" 
                                                v-model="customerInfo.notes"
                                                placeholder="Heeft u specifieke wensen of opmerkingen?"
                                                rows="3"
                                            ></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-light"
                                            @click="prevStep"
                                        >
                                            <i class="fas fa-arrow-left mr-sm"></i>
                                            Vorige
                                        </button>
                                    </div>
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-primary"
                                            @click="nextStep"
                                        >
                                            Overzicht
                                            <i class="fas fa-arrow-right ml-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Step 4: Confirmation -->
                            <div v-if="currentStep === 4" class="card">
                                <div class="card-header">
                                    <p class="card-header-title">
                                        <i class="fas fa-check mr-sm"></i>
                                        Bevestig uw afspraak
                                    </p>
                                </div>
                                <div class="card-content">
                                    <div class="booking-summary">
                                        <h4 class="title is-4 mb-xl">Overzicht van uw afspraak</h4>
                                        
                                        <div class="columns">
                                            <div class="column is-half">
                                                <div class="field">
                                                    <label class="label">Service</label>
                                                    <p class="is-size-5">{{ selectedService?.name }}</p>
                                                    <p class="has-text-grey">{{ selectedService?.description }}</p>
                                                </div>
                                                
                                                <div class="field">
                                                    <label class="label">Datum & Tijd</label>
                                                    <p class="is-size-5">
                                                        <i class="fas fa-calendar mr-sm"></i>
                                                        {{ formatDate(selectedDate) }}
                                                    </p>
                                                    <p class="is-size-5">
                                                        <i class="fas fa-clock mr-sm"></i>
                                                        {{ selectedTime }}
                                                    </p>
                                                </div>
                                                
                                                <div class="field">
                                                    <label class="label">Locatie</label>
                                                    <p class="is-size-5">{{ selectedLocation?.name }}</p>
                                                    <p class="has-text-grey">{{ selectedLocation?.address }}</p>
                                                </div>
                                            </div>
                                            
                                            <div class="column is-half">
                                                <div class="field">
                                                    <label class="label">Klantgegevens</label>
                                                    <p class="is-size-5">{{ customerInfo.firstName }} {{ customerInfo.lastName }}</p>
                                                    <p class="has-text-grey">{{ customerInfo.email }}</p>
                                                    <p class="has-text-grey">{{ customerInfo.phone }}</p>
                                                </div>
                                                
                                                <div class="field" v-if="customerInfo.carBrand || customerInfo.carModel">
                                                    <label class="label">Voertuig</label>
                                                    <p class="is-size-5">{{ customerInfo.carBrand }} {{ customerInfo.carModel }}</p>
                                                    <p class="has-text-grey" v-if="customerInfo.licensePlate">{{ customerInfo.licensePlate }}</p>
                                                </div>
                                                
                                                <div class="field">
                                                    <label class="label">Geschatte kosten</label>
                                                    <p class="title is-3 has-text-primary">â‚¬{{ selectedService?.price }}</p>
                                                    <p class="has-text-grey is-size-7">Definitieve prijs na inspectie</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div v-if="customerInfo.notes" class="field">
                                            <label class="label">Opmerkingen</label>
                                            <p class="has-background-white p-md border-radius-sm">{{ customerInfo.notes }}</p>
                                        </div>
                                    </div>
                                    
                                    <div class="field mt-xl">
                                        <div class="control">
                                            <label class="checkbox">
                                                <input type="checkbox" v-model="agreedToTerms">
                                                Ik ga akkoord met de 
                                                <a href="#" target="_blank">algemene voorwaarden</a> 
                                                en 
                                                <a href="#" target="_blank">privacyverklaring</a>
                                            </label>
                                        </div>
                                        <div v-if="errors.terms" class="error-message">
                                            {{ errors.terms }}
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-light"
                                            @click="prevStep"
                                            :disabled="submitting"
                                        >
                                            <i class="fas fa-arrow-left mr-sm"></i>
                                            Wijzigen
                                        </button>
                                    </div>
                                    <div class="card-footer-item">
                                        <button 
                                            class="button is-success is-large"
                                            @click="submitBooking"
                                            :disabled="!agreedToTerms || submitting"
                                            :class="{'is-loading': submitting}"
                                        >
                                            <i class="fas fa-check mr-sm" v-if="!submitting"></i>
                                            Afspraak Bevestigen
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Success Message -->
                            <div v-if="bookingConfirmed" class="card success-animation">
                                <div class="card-content has-text-centered">
                                    <div class="mb-xl">
                                        <i class="fas fa-check-circle has-text-success text-4xl"></i>
                                    </div>
                                    <h2 class="title is-3 has-text-success">Afspraak Bevestigd!</h2>
                                    <p class="subtitle is-5 mb-xl">
                                        Uw afspraak is succesvol geboekt voor {{ formatDate(selectedDate) }} om {{ selectedTime }}.
                                    </p>
                                    <div class="notification is-info is-light">
                                        <p><strong>Bevestigingsnummer:</strong> {{ confirmationNumber }}</p>
                                        <p>U ontvangt binnen enkele minuten een bevestigingsmail op {{ customerInfo.email }}</p>
                                    </div>
                                    <div class="buttons is-centered mt-xl">
                                        <button class="button is-primary" @click="resetBooking">
                                            Nieuwe Afspraak Boeken
                                        </button>
                                        <a href="index.html" class="button is-light">
                                            Terug naar Home
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Date Picker JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/nl.js"></script>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    currentStep: 1,
                    submitting: false,
                    bookingConfirmed: false,
                    confirmationNumber: '',
                    loadingTimeSlots: false,
                    agreedToTerms: false,
                    
                    // Selection data
                    selectedService: null,
                    selectedDate: '',
                    selectedTime: '',
                    selectedLocation: null,
                    
                    // Customer information
                    customerInfo: {
                        firstName: '',
                        lastName: '',
                        email: '',
                        phone: '',
                        address: '',
                        zipCode: '',
                        city: '',
                        carBrand: '',
                        carModel: '',
                        licensePlate: '',
                        notes: ''
                    },
                    
                    // Validation errors
                    errors: {},
                    
                    // Mock data - in production this would come from API
                    services: [
                        {
                            id: 1,
                            name: 'APK Keuring',
                            description: 'Verplichte jaarlijkse keuring van uw voertuig',
                            duration: 60,
                            price: 45
                        },
                        {
                            id: 2,
                            name: 'Grote Onderhoudsbeurt',
                            description: 'Uitgebreide controle en onderhoud van uw auto',
                            duration: 120,
                            price: 199
                        },
                        {
                            id: 3,
                            name: 'Kleine Onderhoudsbeurt',
                            description: 'Basis onderhoud en controle punten',
                            duration: 90,
                            price: 129
                        },
                        {
                            id: 4,
                            name: 'Airco Service',
                            description: 'Controle en onderhoud van uw airconditioning',
                            duration: 75,
                            price: 89
                        },
                        {
                            id: 5,
                            name: 'Bandenwissel',
                            description: 'Wisselen van zomer naar winterbanden of omgekeerd',
                            duration: 45,
                            price: 35
                        },
                        {
                            id: 6,
                            name: 'Remmen Service',
                            description: 'Controle en onderhoud van het remsysteem',
                            duration: 90,
                            price: 149
                        }
                    ],
                    
                    locations: [
                        {
                            id: 1,
                            name: 'AutoService Pro Drachten',
                            address: 'Noorderbuurt 45, 9203AB Drachten'
                        },
                        {
                            id: 2,
                            name: 'AutoService Pro Heerenveen',
                            address: 'Stationsplein 12, 8441AB Heerenveen'
                        }
                    ],
                    
                    timeSlots: []
                }
            },
            
            computed: {
                minDate() {
                    const tomorrow = new Date();
                    tomorrow.setDate(tomorrow.getDate() + 1);
                    return tomorrow.toISOString().split('T')[0];
                }
            },
            
            methods: {
                selectService(service) {
                    this.selectedService = service;
                    this.errors.service = '';
                },
                
                selectTime(time) {
                    this.selectedTime = time;
                    this.errors.time = '';
                },
                
                async loadTimeSlots() {
                    if (!this.selectedDate || !this.selectedLocation) return;
                    
                    this.loadingTimeSlots = true;
                    this.timeSlots = [];
                    this.selectedTime = '';
                    
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Mock time slots - in production this would come from API
                    const mockSlots = [
                        { time: '09:00', available: true },
                        { time: '09:30', available: true },
                        { time: '10:00', available: false },
                        { time: '10:30', available: true },
                        { time: '11:00', available: true },
                        { time: '11:30', available: false },
                        { time: '13:00', available: true },
                        { time: '13:30', available: true },
                        { time: '14:00', available: true },
                        { time: '14:30', available: false },
                        { time: '15:00', available: true },
                        { time: '15:30', available: true },
                        { time: '16:00', available: true },
                        { time: '16:30', available: true }
                    ];
                    
                    this.timeSlots = mockSlots;
                    this.loadingTimeSlots = false;
                },
                
                validateStep() {
                    this.errors = {};
                    
                    if (this.currentStep === 1) {
                        if (!this.selectedService) {
                            this.errors.service = 'Selecteer een service';
                            return false;
                        }
                    }
                    
                    if (this.currentStep === 2) {
                        if (!this.selectedDate) {
                            this.errors.date = 'Selecteer een datum';
                            return false;
                        }
                        if (!this.selectedTime) {
                            this.errors.time = 'Selecteer een tijd';
                            return false;
                        }
                        if (!this.selectedLocation) {
                            this.errors.location = 'Selecteer een locatie';
                            return false;
                        }
                    }
                    
                    if (this.currentStep === 3) {
                        const requiredFields = {
                            firstName: 'Voornaam is verplicht',
                            lastName: 'Achternaam is verplicht',
                            email: 'E-mailadres is verplicht',
                            phone: 'Telefoonnummer is verplicht'
                        };
                        
                        for (const [field, message] of Object.entries(requiredFields)) {
                            if (!this.customerInfo[field]) {
                                this.errors[field] = message;
                            }
                        }
                        
                        if (this.customerInfo.email && !this.isValidEmail(this.customerInfo.email)) {
                            this.errors.email = 'Voer een geldig e-mailadres in';
                        }
                        
                        return Object.keys(this.errors).length === 0;
                    }
                    
                    if (this.currentStep === 4) {
                        if (!this.agreedToTerms) {
                            this.errors.terms = 'Accepteer de voorwaarden om door te gaan';
                            return false;
                        }
                    }
                    
                    return true;
                },
                
                isValidEmail(email) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailRegex.test(email);
                },
                
                nextStep() {
                    if (this.validateStep()) {
                        this.currentStep++;
                    }
                },
                
                prevStep() {
                    this.currentStep--;
                },
                
                async submitBooking() {
                    if (!this.validateStep()) return;
                    
                    this.submitting = true;
                    
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Generate confirmation number
                    this.confirmationNumber = 'ASP' + Math.random().toString(36).substr(2, 9).toUpperCase();
                    
                    /* 
                    // FUTURE: Real API integration
                    try {
                        const bookingData = {
                            service: this.selectedService,
                            date: this.selectedDate,
                            time: this.selectedTime,
                            location: this.selectedLocation,
                            customer: this.customerInfo,
                            confirmationNumber: this.confirmationNumber
                        };
                        
                        const response = await fetch('/api/bookings', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(bookingData)
                        });
                        
                        if (!response.ok) {
                            throw new Error('Booking failed');
                        }
                        
                        const result = await response.json();
                        this.confirmationNumber = result.confirmationNumber;
                        
                        // Send confirmation email
                        await this.sendConfirmationEmail(bookingData);
                        
                        // Integration with Calendly/Reservio
                        await this.syncWithCalendar(bookingData);
                        
                    } catch (error) {
                        console.error('Booking error:', error);
                        alert('Er is een fout opgetreden. Probeer het opnieuw.');
                        this.submitting = false;
                        return;
                    }
                    */
                    
                    this.submitting = false;
                    this.bookingConfirmed = true;
                },
                
                /* 
                // FUTURE: Email confirmation
                async sendConfirmationEmail(bookingData) {
                    const emailTemplate = {
                        to: bookingData.customer.email,
                        subject: `Afspraak bevestiging - ${bookingData.service.name}`,
                        template: 'booking-confirmation',
                        data: {
                            customerName: `${bookingData.customer.firstName} ${bookingData.customer.lastName}`,
                            serviceName: bookingData.service.name,
                            date: this.formatDate(bookingData.date),
                            time: bookingData.time,
                            location: bookingData.location.name,
                            locationAddress: bookingData.location.address,
                            confirmationNumber: bookingData.confirmationNumber,
                            estimatedPrice: bookingData.service.price,
                            notes: bookingData.customer.notes
                        }
                    };
                    
                    await fetch('/api/send-email', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(emailTemplate)
                    });
                }
                
                // FUTURE: Calendar integration
                async syncWithCalendar(bookingData) {
                    // Calendly integration
                    const calendlyEvent = {
                        event_type: 'autoservice-appointment',
                        start_time: `${bookingData.date}T${bookingData.time}:00`,
                        invitee: {
                            name: `${bookingData.customer.firstName} ${bookingData.customer.lastName}`,
                            email: bookingData.customer.email,
                            phone: bookingData.customer.phone
                        },
                        responses: {
                            service: bookingData.service.name,
                            car_info: `${bookingData.customer.carBrand} ${bookingData.customer.carModel}`,
                            license_plate: bookingData.customer.licensePlate,
                            notes: bookingData.customer.notes
                        }
                    };
                    
                    await fetch('https://api.calendly.com/scheduled_events', {
                        method: 'POST',
                        headers: {
                            'Authorization': 'Bearer YOUR_CALENDLY_TOKEN',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(calendlyEvent)
                    });
                }
                */
                
                formatDate(dateString) {
                    const date = new Date(dateString);
                    return date.toLocaleDateString('nl-NL', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                },
                
                resetBooking() {
                    this.currentStep = 1;
                    this.bookingConfirmed = false;
                    this.confirmationNumber = '';
                    this.selectedService = null;
                    this.selectedDate = '';
                    this.selectedTime = '';
                    this.selectedLocation = null;
                    this.agreedToTerms = false;
                    this.customerInfo = {
                        firstName: '',
                        lastName: '',
                        email: '',
                        phone: '',
                        address: '',
                        zipCode: '',
                        city: '',
                        carBrand: '',
                        carModel: '',
                        licensePlate: '',
                        notes: ''
                    };
                    this.errors = {};
                    this.timeSlots = [];
                }
            }
        }).mount('#bookingApp');
    </script>

    <!-- 
    ==========================================
    DATABASE SCHEMA (for future implementation)
    ==========================================
    
    CREATE TABLE bookings (
        id INT PRIMARY KEY AUTO_INCREMENT,
        confirmation_number VARCHAR(20) UNIQUE NOT NULL,
        service_id INT NOT NULL,
        location_id INT NOT NULL,
        booking_date DATE NOT NULL,
        booking_time TIME NOT NULL,
        customer_first_name VARCHAR(100) NOT NULL,
        customer_last_name VARCHAR(100) NOT NULL,
        customer_email VARCHAR(255) NOT NULL,
        customer_phone VARCHAR(20) NOT NULL,
        customer_address VARCHAR(255),
        customer_zip_code VARCHAR(10),
        customer_city VARCHAR(100),
        car_brand VARCHAR(100),
        car_model VARCHAR(100),
        license_plate VARCHAR(20),
        notes TEXT,
        status ENUM('pending', 'confirmed', 'completed', 'cancelled') DEFAULT 'pending',
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    );
    
    CREATE TABLE services (
        id INT PRIMARY KEY AUTO_INCREMENT,
        name VARCHAR(255) NOT NULL,
        description TEXT,
        duration_minutes INT NOT NULL,
        base_price DECIMAL(8,2) NOT NULL,
        active BOOLEAN DEFAULT TRUE
    );
    
    CREATE TABLE locations (
        id INT PRIMARY KEY AUTO_INCREMENT,
        name VARCHAR(255) NOT NULL,
        address VARCHAR(255) NOT NULL,
        phone VARCHAR(20),
        email VARCHAR(255),
        active BOOLEAN DEFAULT TRUE
    );
    
    CREATE TABLE time_slots (
        id INT PRIMARY KEY AUTO_INCREMENT,
        location_id INT NOT NULL,
        date DATE NOT NULL,
        time TIME NOT NULL,
        available BOOLEAN DEFAULT TRUE,
        FOREIGN KEY (location_id) REFERENCES locations(id)
    );
    
    ==========================================
    EMAIL TEMPLATE (for future implementation)
    ==========================================
    
    Subject: Afspraak bevestiging - AutoService Pro
    
    Beste {{customerName}},
    
    Bedankt voor het boeken van een afspraak bij AutoService Pro!
    
    AFSPRAAK DETAILS:
    ==================
    Service: {{serviceName}}
    Datum: {{date}}
    Tijd: {{time}}
    Locatie: {{location}}
    Adres: {{locationAddress}}
    
    Bevestigingsnummer: {{confirmationNumber}}
    Geschatte kosten: â‚¬{{estimatedPrice}} (definitieve prijs na inspectie)
    
    {{#if notes}}
    Uw opmerkingen: {{notes}}
    {{/if}}
    
    BELANGRIJKE INFORMATIE:
    ======================
    - Zorg dat u 10 minuten voor uw afspraak aanwezig bent
    - Neem uw rijbewijs en kentekenbewijs mee
    - Bij annulering, bel ons minimaal 24 uur van tevoren
    
    Heeft u vragen? Neem gerust contact met ons op:
    Telefoon: 0512-123456
    Email: info@autoservicepro-drachten.nl
    
    Met vriendelijke groet,
    Het team van AutoService Pro
    
    ==========================================
    API ENDPOINTS (for future implementation)
    ==========================================
    
    POST /api/bookings
    - Create new booking
    - Send confirmation email
    - Update calendar availability
    
    GET /api/services
    - Get available services
    
    GET /api/locations
    - Get service locations
    
    GET /api/timeslots?date=YYYY-MM-DD&location_id=1
    - Get available time slots for date and location
    
    PUT /api/bookings/{id}/status
    - Update booking status
    
    DELETE /api/bookings/{id}
    - Cancel booking
    
    -->
</body>
</html>